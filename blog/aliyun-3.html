<!DOCTYPE html>
<html>
<head>
    <link href="../css/main.css" rel="stylesheet">
    <meta charset='utf-8'>
    <meta name="keywords" content="冷夜枫寒,lengyefenghan" />
    <meta name="description" content="冷夜枫寒的个人博客-枫叶落，荻花干，夜宿渔舟不觉寒" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="author" content="name,lengyefenghan@outlook.com" />
    <meta name="robots" content="index,follow" />
    <script src="../js/ttl.js"></script>
    <title>冷夜枫寒</title>
</head>
<body>
    <header>
        <div class="top_nav">
            <a href="../index.html">首页</a>
            <a href="../list.html">技术杂谈</a>
            <a href="../bard.html">游吟者</a>
            <a href="../about.html">关于我</a>
            <a href="../download.html">资源下载</a>
            <a href="../link.html">友情链接</a>
        </div>
    </header>
    <!----卡片式个人简介---->
    <!----side---->
    <aside>
        <img src="../imgages/tx.jpg" />
        <div id="mancard">
            <h1>个人简介</h1>
            <hr />
            <script type="text/javascript" src="../js/about.js" charset="utf-8"></script>
            <hr />
            <h1>推荐文章</h1>
            <hr />
            <script type="text/javascript" src="../js/aside_doc.js" charset="utf-8"></script>
            <hr />
            <h1>友情链接</h1>
            <hr />
            <script type="text/javascript" src="../js/aside_link.js" charset="utf-8"></script>
        </div>
    </aside>
    <!----卡片式博客简介---->
    <article>
        <div>
            <div class="caiju">
                <p>
                    结庐在人境，而无车马喧。
                </p>
                <p>
                    问君何能尔？心远地自偏。
                </p>
                <p>
                    采菊东篱下，悠然见南山。
                </p>
                <p>
                    山气日夕佳，飞鸟相与还。
                </p>
                <p>
                    此中有真意，欲辨已忘言。
                </p>
            </div>
            <img src="../imgages/bg.jpg" />

        </div>

        <!--此处开始list-->
        <div class="card" height="auto">
            <div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">首先安装</span><span style="font-family:Calibri; font-size:10.5pt">nginx php mariadb</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">pacman -S nginx mariadb mariadb-libs php-fpm php-gd </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#php-fpm php-gd</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">是需要的两个</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">php</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">模块</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置数据库</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">需要以</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">root</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">权限运行</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl start mariadb </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">开启数据库服务端</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl enable mariadb </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">设置开机启动</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mysql_secure_installation</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">设置安全组策略第一个是询问</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">MariaDB</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">的</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">root</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">密码，没有设置密码就可以直接按</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">Enter</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">键，再设置一个</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">root</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">密码。之后，第一个问答输入</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">y</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">他会删除</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">test</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">数据库，第二个问答是是否删除</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">anonymous</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">用户以及最后一个禁用用</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">root</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">用户远程登录。</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">启用</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl start nginx</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">启用</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl enable nginx</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">设置开机启动</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">之后浏览器打开网址</span><span style="font-family:Calibri; font-size:10.5pt">http://server-ip:80/</span><span style="font-family:宋体; font-size:10.5pt">查看，会看到</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">的欢迎界面</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">如果绑定域名用于名访问提示服务器不存在很正常，因为你还没有正确的配置</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">接下来进入进阶型配置，而非默认配置。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">首先关掉</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">服务</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl stop nginx</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">然后进入到</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">配置文件目录</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">cd /etc/nginx</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">备份配置及文件</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mv nginx.conf nginx.conf.bak</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">新建配置文件 </span><span style="font-family:Calibri; font-size:10.5pt">/etc/nginx/nginx.conf</span><span style="font-family:宋体; font-size:10.5pt">并编辑内容如下</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">user http;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt"># May be equal to `grep processor /proc/cpuinfo | wc -l`</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">worker_processes auto;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">worker_cpu_affinity auto;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt"># PCRE JIT can speed up processing of regular expressions significantly.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">pcre_jit on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">events {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Should be equal to `ulimit -n`</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    worker_connections 1024;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Let each process accept multiple connections.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    multi_accept on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Preferred connection method for newer linux versions.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    use epoll;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">}</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">http {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    server_tokens off; # Disables the “Server” response header</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    charset utf-8;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Sendfile copies data between one FD and other from within the kernel.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # More efficient than read() + write(), since the requires transferring</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # data to and from the user space.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    sendfile on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Tcp_nopush causes nginx to attempt to send its HTTP response head in one</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # packet, instead of using partial frames. This is useful for prepending</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # headers before calling sendfile, or for throughput optimization.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    tcp_nopush on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Don't buffer data-sends (disable Nagle algorithm). Good for sending</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # frequent small bursts of data in real time.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    #</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    tcp_nodelay on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # On Linux, AIO can be used starting from kernel version 2.6.22.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # It is necessary to enable directio, or otherwise reading will be blocking.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # aio threads;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # aio_write on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # directio 8m;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Caches information about open FDs, freqently accessed files.</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # open_file_cache max=200000 inactive=20s;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # open_file_cache_valid 60s;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # open_file_cache_min_uses 2;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # open_file_cache_errors on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # http://nginx.org/en/docs/hash.html</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    types_hash_max_size 4096;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    include mime.types;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    default_type application/octet-stream;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Logging Settings</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    access_log off;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # Gzip Settings</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_comp_level 6;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_min_length 500;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_proxied expired no-cache no-store private auth;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_vary on;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_disable "MSIE [1-6]\.";</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    gzip_types</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/atom+xml</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/javascript</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/json</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/ld+json</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/manifest+json</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/rss+xml</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/vnd.geo+json</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/vnd.ms-fontobject</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/x-font-ttf</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/x-web-app-manifest+json</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/xhtml+xml</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        application/xml</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        font/opentype</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        image/bmp</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        image/svg+xml</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        image/x-icon</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/cache-manifest</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/css</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/plain</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/vcard</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/vnd.rim.location.xloc</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/vtt</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/x-component</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        text/x-cross-domain-policy;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    # index index.php index.html index.htm;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    include sites-enabled/*; # See Server blocks</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">}</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">上面的配置文件并没有定义任何服务，所以即使启用也无法访问，接下来要使用多个配置文件</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mkdir /etc/nginx/sites-available</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">新建模块文件，放的位置</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mkdir /etc/nginx/sites-enabled</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">模块文件启用的目录</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">进入到模块文件夹</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">cd /etc/nginx/sites-available</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">编辑</span><span style="font-family:Calibri; font-size:10.5pt">/etc/nginx/sites-available/example</span><span style="font-family:宋体; font-size:10.5pt">文件创建一个示例代码块</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">server {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        listen 80;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        listen [::]:80;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        server_name server_url/name/ip;</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">可以是</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">ip</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">、域名、等等，本地调试请改为</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">127.0.0.1</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        root /usr/share/nginx/html;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        location / {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">           index index.php index.html index.htm;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        }</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">}</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">启用代码块只需要简单的创建一个符号链接：</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">ln -s /etc/nginx/sites-available/example /etc/nginx/sites-enabled/example</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">取消代码块</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">unlink /etc/nginx/sites-enabled/example</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">添加代码块或者修改配置只需要重启</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">就可以了</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl restart nginx</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:Calibri; font-size:10.5pt">php</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">首先修改</span><span style="font-family:Calibri; font-size:10.5pt">php</span><span style="font-family:宋体; font-size:10.5pt">配置文件启用模块</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">/etc/php/php.ini</span><span style="font-family:宋体; font-size:10.5pt">文件：</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">extension=gd.so</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">extension=pdo_mysql.so</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">extension=mysqli.so</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">启用</span><span style="font-family:Calibri; font-size:10.5pt">php-fpm</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl start php-fpm</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl enable php-fpm</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">在</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">配置模块里启用</span><span style="font-family:Calibri; font-size:10.5pt">php</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">/etc/nginx/sites-available/php-test</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">server {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    listen 8000;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    listen [::]:8000;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:42pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">server_name server_url/name/ip;</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">可以是</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">ip</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">、域名、等等，本地调试请改为</span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">127.0.0.1</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:42pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">root /usr/share/nginx/html;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    location / {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        index test.php index.html index.htm;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    }</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    location ~ [^/]\.php(/|$) {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        # Correctly handle request like /test.php/foo/blah.php or /test.php/</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_split_path_info ^(.+?\.php)(/.*)$;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        try_files $uri $document_root$fastcgi_script_name =404;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        # Mitigate https://httpoxy.org/ vulnerabilities</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_param HTTP_PROXY "";</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_pass unix:/run/php-fpm/php-fpm.sock;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_index index.php;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        include fastcgi_params;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    }</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">}</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">在</span><span style="font-family:Calibri; font-size:10.5pt">/usr/share/nginx/html</span><span style="font-family:宋体; font-size:10.5pt">下新建</span><span style="font-family:Calibri; font-size:10.5pt">test.php</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&lt;?php phpinfo(); ?&gt;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">之后</span><span style="font-family:Calibri; font-size:10.5pt">link</span><span style="font-family:宋体; font-size:10.5pt">启用模块</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">ln -s /etc/nginx/sites-available/php-test /etc/nginx/sites-enabled/php-test</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">然后重启</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">systemctl restart nginx</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">之后浏览器地址栏访问，这个时候需要注意三点</span></p><ol type="1" style="margin:0pt; padding-left:0pt"><li style="font-family:Calibri; font-size:10.5pt; line-height:115%; list-style-position:inside; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">一共使用了两个</span><span style="font-family:Calibri; font-size:10.5pt">web</span><span style="font-family:宋体; font-size:10.5pt">端口</span><span style="font-family:Calibri; font-size:10.5pt">80</span><span style="font-family:宋体; font-size:10.5pt">和</span><span style="font-family:Calibri; font-size:10.5pt">8000</span><span style="font-family:宋体; font-size:10.5pt">，两个一个是</span><span style="font-family:Calibri; font-size:10.5pt">html</span><span style="font-family:宋体; font-size:10.5pt">的静态，另一个是可以使用</span><span style="font-family:Calibri; font-size:10.5pt">php</span><span style="font-family:宋体; font-size:10.5pt">的动态，访问时需要区分</span></li><li style="font-family:Calibri; font-size:10.5pt; line-height:115%; list-style-position:inside; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">本地访问一般都可以，服务器访问需要开启端口阿里云的配置文档非常详细了，这里给个链接：</span><span style="font-family:Calibri; font-size:10.5pt">https://help.aliyun.com/document_detail/25471.html</span><span style="font-family:Calibri; font-size:10.5pt">              </span></li></ol><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">3.</span><span style="font-family:宋体; font-size:10.5pt">访问的时候注意代码模块</span><span style="font-family:Calibri; font-size:10.5pt">test.php</span><span style="font-family:宋体; font-size:10.5pt">中代码</span><span style="font-family:Calibri; font-size:10.5pt">index</span><span style="font-family:宋体; font-size:10.5pt">设定的为主页，指定第一加载</span><span style="font-family:Calibri; font-size:10.5pt">php</span><span style="font-family:宋体; font-size:10.5pt">文件为</span><span style="font-family:Calibri; font-size:10.5pt">test.php</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">访问的两个地址：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><a href="http://server_name:80/"><span style="color:#0000ff; font-family:Calibri; font-size:10.5pt; text-decoration:underline">http://server_name:80/</span></a><span style="font-family:Calibri; font-size:10.5pt"> #</span><span style="font-family:宋体; font-size:10.5pt">指向静态加载，也是默认加载</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><a href="http://server_name:8000/"><span style="color:#0000ff; font-family:Calibri; font-size:10.5pt; text-decoration:underline">http://server_name:8000/</span></a><span style="font-family:Calibri; font-size:10.5pt"> #</span><span style="font-family:宋体; font-size:10.5pt">指向动态加载</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">最后测试</span><span style="font-family:Calibri; font-size:10.5pt">phpmyadmin</span><span style="font-family:宋体; font-size:10.5pt">搭建和测试</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">首先安装</span><span style="font-family:Calibri; font-size:10.5pt">phpmyadmin</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">pacman -S phpmyadmin</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">然后创建</span><span style="font-family:Calibri; font-size:10.5pt">phpmyadmin </span><span style="font-family:宋体; font-size:10.5pt">的</span><span style="font-family:Calibri; font-size:10.5pt">nginx</span><span style="font-family:宋体; font-size:10.5pt">配置文件</span><span style="font-family:Calibri; font-size:10.5pt">(</span><span style="font-family:宋体; font-size:10.5pt">基于</span><span style="font-family:Calibri; font-size:10.5pt">php-test</span><span style="font-family:宋体; font-size:10.5pt">改就行了</span><span style="font-family:Calibri; font-size:10.5pt">)</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">/etc/nginx/sites-available/phpmyadmin</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">server {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    listen </span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">888</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    listen [::]:8</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">88</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">server_name server_url/name/ip;#</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">可以是</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">ip</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">、域名、等等，本地调试请改为</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">127.0.0.1</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">root /</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">srv/http/phpmyadmin</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">;</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">修改</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">web</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">目录</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">    </span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">location / {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        index </span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">index</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">.php index.html index.htm;</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">设置为</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">index.php</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    }</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    location ~ [^/]\.php(/|$) {</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        # Correctly handle request like /test.php/foo/blah.php or /test.php/</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_split_path_info ^(.+?\.php)(/.*)$;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        try_files $uri $document_root$fastcgi_script_name =404;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        # Mitigate https://httpoxy.org/ vulnerabilities</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_param HTTP_PROXY "";</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_pass unix:/run/php-fpm/php-fpm.sock;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_index index.php;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">        include fastcgi_params;</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">    }</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">}</span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">接下来设置</span><span style="font-family:Calibri; font-size:10.5pt">web</span><span style="font-family:宋体; font-size:10.5pt">权限</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">首先链接</span><span style="font-family:Calibri; font-size:10.5pt">phpmyadmin</span><span style="font-family:宋体; font-size:10.5pt">到</span><span style="font-family:Calibri; font-size:10.5pt">/srv/http</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">ln -s </span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">/usr/share/webapps/phpMyAdmin</span><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt"> /srv/http/phpmyadmin</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">然后使用安装脚本</span></p><div style="border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; clear:both; margin:0pt 0pt 10pt"><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">mkdir /usr/share/webapps/phpMyAdmin/config </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">创建配置文件文件夹</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:10pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">chown http:http /usr/share/webapps/phpMyAdmin/config </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">用户组使可以网页端访问</span></p><p style="background-color:#000000; margin:0pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">chmod 750 /usr/share/webapps/phpMyAdmin/config </span><span style="color:#70ad47; font-family:Calibri; font-size:10.5pt">#</span><span style="color:#70ad47; font-family:宋体; font-size:10.5pt">修改权限保证安全 </span></p></div><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">然后输入网址</span><span style="font-family:Calibri; font-size:10.5pt">http://server:888/</span><span style="font-family:宋体; font-size:10.5pt">访问</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">BUG</span><span style="font-family:宋体; font-size:10.5pt">：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">1.</span><span style="font-family:宋体; font-size:10.5pt">配置文件现在需要一个短语密码，修改配置文件</span><span style="font-family:Calibri; font-size:10.5pt">,</span><span style="font-family:宋体; font-size:10.5pt">中间</span><span style="font-family:Calibri; font-size:10.5pt">char</span><span style="font-family:宋体; font-size:10.5pt">必须是</span><span style="font-family:Calibri; font-size:10.5pt">32</span><span style="font-family:宋体; font-size:10.5pt">个字符</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">/etc/webapps/phpmyadmin/config.inc.php</span></p><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">$cfg['blowfish_secret'] = 'char';</span></p><ol start="2" type="1" style="margin:0pt; padding-left:0pt"><li style="font-family:Calibri; font-size:10.5pt; line-height:115%; list-style-position:inside; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:宋体; font-size:10.5pt">错误提示：安装时所用的 </span><span style="font-family:Calibri; font-size:10.5pt">config </span><span style="font-family:宋体; font-size:10.5pt">文件夹尚未删除。我们强烈建议您在完成 </span><span style="font-family:Calibri; font-size:10.5pt">phpMyAdmin </span><span style="font-family:宋体; font-size:10.5pt">安装后立即删除该文件夹。否则未经授权的用户都可以下载您的配置文件从而使服务器陷入危险。</span></li></ol><p style="background-color:#000000; border-bottom-color:#000000; border-bottom-style:dotted; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:dotted; border-top-width:0.75pt; margin:0pt 0pt 10pt; orphans:0; padding-bottom:1pt; padding-left:4pt; padding-right:4pt; padding-top:1pt; text-indent:48.05pt; widows:0"><span style="color:#ffffff; font-family:Calibri; font-size:10.5pt">rm -rf /usr/share/webapps/phpMyAdmin/config #</span><span style="color:#ffffff; font-family:宋体; font-size:10.5pt">删除创建的配置文件文件夹</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; widows:0"><span style="font-family:宋体; font-size:10.5pt">到此基本</span><span style="font-family:Calibri; font-size:10.5pt">lnmp</span><span style="font-family:宋体; font-size:10.5pt">的环境已经搭建完成了</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; widows:0"><span style="font-family:宋体; font-size:10.5pt">后面文章包括搭建</span><span style="font-family:Calibri; font-size:10.5pt">wordpress</span><span style="font-family:宋体; font-size:10.5pt">等等</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-indent:48.05pt; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p></div>
        <br />
        <br />
        </div>

    </article>


    <footer>
        <hr />
        <script type="text/javascript" src="../js/footer.js" charset="utf-8"></script>
    </footer>
</body>

</html>